<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>测试修复后的图标功能</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      line-height: 1.6;
    }
    .test-section {
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    .test-item {
      margin: 10px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .large-text {
      font-size: 24px;
    }
    .small-text {
      font-size: 12px;
    }
    .red-text {
      color: red;
    }
    .blue-text {
      color: blue;
    }
    .green-text {
      color: green;
    }
  </style>
</head>
<body>
  <div id="app">
    <h1>🧪 图标功能测试</h1>

    <div class="test-section">
      <h2>📏 默认尺寸测试 (1em)</h2>
      <div class="test-item">
        <span>正常文字</span>
        <xzx-icon name="like"></xzx-icon>
        <span>图标应该和文字一样高</span>
      </div>
      <div class="test-item large-text">
        <span>大号文字</span>
        <xzx-icon name="camera"></xzx-icon>
        <span>图标应该和大号文字一样高</span>
      </div>
      <div class="test-item small-text">
        <span>小号文字</span>
        <xzx-icon name="search"></xzx-icon>
        <span>图标应该和小号文字一样高</span>
      </div>
    </div>

    <div class="test-section">
      <h2>🎨 颜色继承测试 (currentColor)</h2>
      <div class="test-item red-text">
        <span>红色文字</span>
        <xzx-icon name="like"></xzx-icon>
        <span>图标应该是红色</span>
      </div>
      <div class="test-item blue-text">
        <span>蓝色文字</span>
        <xzx-icon name="setting-one"></xzx-icon>
        <span>图标应该是蓝色</span>
      </div>
      <div class="test-item green-text">
        <span>绿色文字</span>
        <xzx-icon name="camera"></xzx-icon>
        <span>图标应该是绿色</span>
      </div>
    </div>

    <div class="test-section">
      <h2>🔧 自定义属性测试</h2>
      <div class="test-item">
        <span>自定义尺寸:</span>
        <xzx-icon name="all-application" size="16"></xzx-icon>
        <xzx-icon name="all-application" size="24"></xzx-icon>
        <xzx-icon name="all-application" size="32"></xzx-icon>
        <xzx-icon name="all-application" size="48"></xzx-icon>
      </div>
      <div class="test-item">
        <span>自定义颜色:</span>
        <xzx-icon name="like" color="#ff4d4f" size="24"></xzx-icon>
        <xzx-icon name="like" color="#52c41a" size="24"></xzx-icon>
        <xzx-icon name="like" color="#1890ff" size="24"></xzx-icon>
        <xzx-icon name="like" color="#722ed1" size="24"></xzx-icon>
      </div>
    </div>

    <div class="test-section">
      <h2>📊 状态信息</h2>
      <div class="test-item">
        <span>SVG加载状态: {{ svgLoaded ? '✅ 已加载' : '⏳ 加载中' }}</span>
      </div>
      <div class="test-item">
        <span>图标数量: {{ iconCount }}</span>
      </div>
    </div>
  </div>

  <!-- Vue.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>

  <script>
    // 图标组件定义 (使用修复后的配置)
    const XzxIcon = {
      name: 'XzxIcon',
      props: {
        name: { type: String, required: true },
        size: { type: [String, Number], default: '1em' },
        color: { type: String, default: 'currentColor' }
      },
      render(h) {
        return h('svg', {
          attrs: {
            class: 'xzx-icon',
            width: this.size,
            height: this.size,
            'aria-hidden': true
          },
          style: {
            verticalAlign: 'middle',
            display: 'inline-block',
            fill: this.color,
            color: this.color
          }
        }, [
          h('use', {
            attrs: { 'href': `#${this.name}` }
          })
        ])
      }
    }

    // 加载SVG文件
    function loadSvgIcons() {
      return new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = './xzx-icon-svg.js'
        script.onload = resolve
        script.onerror = reject
        document.head.appendChild(script)
      })
    }

    // Vue应用
    new Vue({
      el: '#app',
      components: { XzxIcon },
      data: {
        svgLoaded: false,
        iconCount: 0
      },
      async mounted() {
        try {
          await loadSvgIcons()
          setTimeout(() => {
            const symbols = document.querySelectorAll('symbol')
            this.svgLoaded = symbols.length > 0
            this.iconCount = symbols.length
            console.log('✅ 图标加载完成，共', this.iconCount, '个图标')
          }, 100)
        } catch (error) {
          console.error('❌ SVG加载失败:', error)
        }
      }
    })
  </script>
</body>
</html>
